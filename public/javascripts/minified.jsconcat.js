app=angular.module("movieSeat",["ngMaterial"]),angular.module("movieSeat").controller("moviesearchCtrl",["moviesearchFactory","$scope","$q","$timeout",function(e,o,t,n){o.showResult=!1,o.createList=function(n){o.showResult=!0,o.searchquery.length>0?(o.showProgress=!0,e.getMovies(n).then(function(e){function n(){function e(e){return t(function(o){var t=new Image;t.src=e,t.onload=function(){o(t)}})}var n=[];return o.moviesPreload.forEach(function(o){n.push(e(o.poster_path))}),t.all(n).then(function(){o.movies=o.moviesPreload,o.showProgress=!1})}o.moviesResponse=e,o.noResult=o.moviesResponse.length>0?!1:!0,o.moviesPreload=[],o.moviesResponse.forEach(function(e){null!==e.poster_path&&(""==e.overview&&(e.overview="No summary available"),o.moviesPreload.push({poster_path:"http://image.tmdb.org/t/p/w92/"+e.poster_path,title:e.title,release_date:e.release_date,overview:e.overview}))}),n()})):(o.movies=[],o.noResult=!1,o.model={})},o.model={},o.toggleDisplay=function(e){e==o.model.displayedIndex?(o.model.displayedIndex=-1,o.toggleSsomething=!1):(o.model.displayedIndex=e,o.toggleSsomething=!0),n(function(){for(var e=document.getElementsByClassName("container_additional_information"),o=document.getElementsByClassName("additional_info "),t=0;o.length>t;t++)e[t].style.height=Number(o[t].clientHeight)+"px"},25)}}]),angular.module("movieSeat").factory("moviesearchFactory",["$http","$q",function(e,o){var t={};return t.getMovies=function(t){var n=o.defer();return e({method:"JSONP",url:"http://api.themoviedb.org/3/search/movie?api_key=a8f7039633f2065942cd8a28d7cadad4&query="+encodeURIComponent(t)+"&callback=JSON_CALLBACK"}).success(function(e){n.resolve(e.results)}).error(function(){n.reject()}),n.promise},t}]);